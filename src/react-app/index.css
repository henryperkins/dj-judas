/* ==========================================================================
   index.css — Tailwind v4-native
   - Design tokens via @theme
   - Dark mode via @custom-variant + token overrides
   - Components consolidated with @apply
   - Keeps your existing class names stable
   ========================================================================== */

/* 0) Tailwind v4 entry + dark variant ------------------------------------ */
@import "tailwindcss";

/* Create a `.dark:` variant that activates when a `.dark` class is present
   on any ancestor (including <html>). */
@custom-variant dark (&:where(.dark, .dark *));

/* 1) Theme tokens (light by default) ------------------------------------- */
/* Map your palette, radii, shadows, and breakpoints to Tailwind v4 tokens.
   Any --color-* token automatically gets utilities like bg-*, text-*, ring-*.
   Breakpoint tokens create responsive variants like sm: md: lg: etc. */
@theme {
  /* Breakpoints (px → rem assuming 16px root) */
  --breakpoint-sm: 30rem;
  /* 480px */
  --breakpoint-md: 48rem;
  /* 768px */
  --breakpoint-lg: 64rem;
  /* 1024px */
  --breakpoint-xl: 80rem;
  /* 1280px */
  --breakpoint-2xl: 96rem;
  /* 1536px */

  /* Radii / shadows */
  --radius: 0.75rem;
  /* maps to rounded */
  --radius-xs: 0.25rem;
  --radius-md: 1rem;
  --radius-lg: 1.125rem;
  /* used by cards */
  /* (Using Tailwind default shadows; override if you want different values) */

  /* Core surface & text colors (light) */
  --color-background: hsl(0 0% 100%);
  --color-foreground: hsl(240 10% 3.9%);
  --color-card: hsl(0 0% 100%);
  --color-card-foreground: hsl(240 10% 3.9%);
  --color-popover: hsl(0 0% 100%);
  --color-popover-foreground: hsl(240 10% 3.9%);
  --color-secondary: hsl(0 0% 96%);
  --color-secondary-foreground: hsl(240 5.9% 10%);
  --color-muted: hsl(0 0% 96%);
  --color-muted-foreground: hsl(240 4% 38%);
  --color-border: hsl(240 5% 58%);
  --color-border-strong: hsl(240 5% 48%);
  --color-input: var(--color-border-strong);

  /* Accent/brand */
  --color-accent: hsl(336 76% 32%);
  --color-accent-600: hsl(336 76% 36%);
  --color-accent-700: hsl(336 76% 28%);
  --color-accent-foreground: hsl(0 0% 100%);
  --color-primary: var(--color-accent);
  --color-primary-foreground: hsl(0 0% 100%);
  --color-ring: var(--color-accent);

  /* Status */
  --color-destructive: hsl(0 84.2% 60.2%);
  --color-destructive-foreground: hsl(0 0% 98%);
  --color-success: hsl(160 84% 39%);
  --color-success-700: hsl(160 84% 35%);

  /* Brand refs */
  --color-brand-facebook: hsl(221 89% 61%);
  --color-brand-spotify: hsl(141 73% 41%);
  --color-brand-apple: hsl(357 97% 60%);
  --color-brand-instagram-start: hsl(291 64% 42%);
  --color-brand-instagram-end: hsl(36 97% 63%);

  /* Type scale helpers (optional; use Tailwind defaults otherwise) */
  /* --text-sm, --text-base, etc. can be customized here if desired. */
}

/* 1b) Dark theme overrides (token values only — utilities adapt automatically)
       Because theme variables are regular CSS variables, we can override them
       at runtime for dark mode. */
:where(.dark, .dark *) {
  --color-background: hsl(240 10% 3.9%);
  --color-foreground: hsl(0 0% 98%);
  --color-card: hsl(240 10% 3.9%);
  --color-card-foreground: hsl(0 0% 98%);
  --color-popover: hsl(240 10% 3.9%);
  --color-popover-foreground: hsl(0 0% 98%);
  --color-secondary: hsl(240 3.7% 15.9%);
  --color-secondary-foreground: hsl(0 0% 98%);
  --color-muted: hsl(240 3.7% 15.9%);
  --color-muted-foreground: hsl(240 6% 72%);
  --color-accent: hsl(336 65% 55%);
  --color-accent-600: hsl(336 70% 60%);
  --color-accent-700: hsl(336 70% 50%);
  --color-destructive: hsl(0 62.8% 30.6%);
  --color-border: hsl(240 5% 40%);
  --color-border-strong: hsl(240 4% 52%);
  --color-input: var(--color-border-strong);
  --color-ring: var(--color-accent);
  --radius: 0.5rem;
  /* slightly tighter rounding in dark */
}

/* Safe-area helpers (standalone variables convenient for component calc()) */
:root {
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
}

/* 2) Base layer ----------------------------------------------------------- */
@layer base {

  /* Preflight already normalizes most elements — layer on project defaults */
  html {
    @apply font-sans text-base leading-relaxed text-foreground bg-background antialiased;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply min-h-svh overflow-x-hidden;
  }

  .skip-link {
    position: absolute;
    left: -1000px;
    top: auto;
    width: 1px;
    height: 1px;
    overflow: hidden;
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    white-space: nowrap;
  }

  .skip-link:focus-visible {
    position: fixed;
    top: calc(1rem + var(--safe-area-inset-top));
    left: calc(1rem + var(--safe-area-inset-left));
    width: auto;
    height: auto;
    clip: auto;
    clip-path: none;
    padding: 0.75rem 1.25rem;
    z-index: 10000;
    background: var(--color-accent);
    color: var(--color-primary-foreground);
    border-radius: var(--radius);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
    text-decoration: none;
  }

  a {
    @apply text-accent-700 font-medium hover:underline hover:text-accent-600;
  }

  h1 {
    @apply text-[clamp(1.5rem,3.2vw,2.25rem)] leading-tight font-bold;
  }

  h2 {
    @apply text-[clamp(1.1rem,2.6vw,1.6rem)] font-semibold;
  }

  h3 {
    @apply text-[clamp(1rem,2vw,1.25rem)] font-semibold;
  }

  /* Focus styles that are consistent with tokenized ring color */
  :where(a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])):focus-visible {
    @apply outline-3 outline-offset-2 outline-ring/100;
  }

  /* Scroll behavior for pleasant in-page nav */
  html {
    scroll-behavior: smooth;
  }

  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }

    html {
      scroll-behavior: auto !important;
    }
  }
}

/* 3) Component layer ------------------------------------------------------ */
@layer components {

  /* Container (keeps your existing .container class) */
  .container {
    @apply w-full mx-auto px-4 sm:max-w-[640px] md:max-w-[768px] lg:max-w-[1024px] xl:max-w-[1280px] 2xl:max-w-[1536px];
  }

  /* Visibility helpers kept for legacy markup */
  .mobile-only {
    @apply block md:hidden;
  }

  .tablet-up {
    @apply hidden md:block;
  }

  .desktop-only {
    @apply hidden lg:block;
  }

  /* Section helpers */
  .section-title {
    @apply text-center mb-8 text-foreground;
  }

  .section-py {
    @apply py-8 md:py-12;
  }

  /* Stack / cluster patterns (cluster uses utilities; stack needs sibling rule) */
  .cluster {
    @apply flex flex-wrap items-center gap-3;
  }

  /* Text utility aliases to existing class names */
  .text-primary {
    @apply text-foreground;
  }

  .text-secondary {
    @apply text-muted-foreground;
  }

  .text-muted {
    @apply text-muted-foreground;
  }

  .text-sm {
    @apply text-sm;
  }

  /* Buttons (base + variants) */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-[var(--radius)] font-semibold cursor-pointer transition px-6 py-3 text-[0.9rem] border border-transparent select-none;
  }

  .btn:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .btn-primary {
    @apply bg-accent text-primary-foreground border-accent hover:brightness-105 hover:-translate-y-[1px];
  }

  .btn-secondary {
    @apply bg-transparent text-accent border-accent hover:bg-card/90;
  }

  .btn-ghost {
    @apply bg-transparent text-foreground hover:bg-card/90;
  }

  .btn-outline {
    @apply bg-transparent text-foreground border-border hover:bg-muted hover:border-muted-foreground;
  }

  .btn-sm {
    @apply px-4 py-2 text-sm;
  }

  .btn-lg {
    @apply px-8 py-4 text-[1.125rem];
  }

  .btn-icon {
    @apply p-3 w-11 h-11;
  }

  /* Loading state (button) */
  .btn-loading {
    color: transparent;
    position: relative;
  }

  .btn-loading::after {
    content: "";
    @apply absolute inset-0 m-auto size-4 rounded-full border-2 border-accent-foreground border-t-transparent animate-spin;
  }

  /* shadcn/ui compatibility slots */
  [data-slot="button"] {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-[var(--radius)] font-semibold cursor-pointer transition;
  }

  [data-slot="button"]:focus-visible {
    @apply outline-none ring-3 ring-[var(--color-ring)]/50;
  }

  [data-slot="button"][disabled] {
    @apply opacity-50 pointer-events-none;
  }

  [data-slot="input"] {
    @apply w-full min-w-0 h-9 bg-transparent text-foreground border border-input rounded-[var(--radius)] px-3 text-base shadow-[var(--shadow-xs)] transition;
  }

  [data-slot="input"]::placeholder {
    @apply text-muted-foreground;
  }

  [data-slot="input"]:focus-visible {
    @apply outline-none ring-3 ring-[var(--color-ring)]/50 border-ring;
  }

  [data-slot="input"][aria-invalid="true"] {
    @apply border-destructive ring-3 ring-destructive/20;
  }

  [data-slot="input"]:disabled {
    @apply pointer-events-none cursor-not-allowed opacity-50;
  }

  [data-slot="card"] {
    @apply bg-card text-card-foreground border border-border rounded-lg shadow-xs flex flex-col gap-6 py-6;
  }

  [data-slot="card-header"],
  [data-slot="card-content"],
  [data-slot="card-footer"] {
    @apply px-6;
  }

  [data-slot="card-footer"] {
    @apply flex items-center;
  }

  [data-slot="card-title"] {
    @apply font-semibold leading-none;
  }

  [data-slot="card-description"] {
    @apply text-muted-foreground text-sm;
  }

  /* Dialog (overlay/content) */
  [data-slot="dialog-overlay"] {
    @apply fixed inset-0 bg-black/50 z-[50];
  }

  [data-slot="dialog-content"] {
    @apply fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-card text-card-foreground border border-border rounded-[var(--radius)] w-[min(640px,calc(100%-2rem))] p-6 shadow-lg z-[51];
  }

  [data-slot="dialog-title"] {
    @apply text-lg font-semibold;
  }

  [data-slot="dialog-description"] {
    @apply text-sm text-muted-foreground;
  }

  [data-slot="dialog-close"] {
    @apply absolute top-4 right-4 rounded-[4px] opacity-70 transition hover:opacity-100 focus-visible:outline-none ring-3 ring-[var(--color-ring)]/50;
  }

  /* Tabs (ListenTabs) */
  [data-slot="tabs-list"] {
    @apply inline-flex items-center justify-center h-11 rounded-lg p-1 bg-muted text-foreground/90 w-auto flex-1;
  }

  [data-slot="tabs-trigger"] {
    @apply inline-flex items-center justify-center gap-1.5 min-h-[44px] h-[calc(100%-2px)] px-3 rounded-md border border-transparent text-[0.95rem] font-semibold text-foreground transition focus-visible:outline-none ring-2 ring-[var(--color-ring)]/40;
  }

  [data-slot="tabs-trigger"][data-state="active"] {
    @apply bg-card text-foreground border-input shadow-xs ring-2 ring-[var(--color-ring)]/30;
  }

  [data-slot="tabs-content"] {
    @apply outline-none;
  }

  /* Brand-styled tabs */
  .listen-tabs {
    @apply grid gap-3;
  }

  .listen-tabs__header {
    @apply flex items-center justify-between gap-2 mb-3;
  }

  .brand-tab {
    @apply font-bold min-h-9 gap-1.5;
  }

  .listen-tabs [data-slot="tabs-trigger"] {
    @apply basis-0 grow;
  }

  .brand-tab--spotify[data-state="active"] {
    @apply bg-[var(--color-brand-spotify)] text-black;
  }

  .brand-tab--apple[data-state="active"] {
    @apply bg-[var(--color-brand-apple)] text-black;
  }

  .listen-tabs__cta {
    @apply flex gap-2 w-auto shrink-0;
  }

  .brand-btn {
    @apply inline-flex items-center gap-1.5 font-bold rounded-[var(--radius)] px-3 py-2 border text-[clamp(.86rem,1.2vw,.95rem)] leading-none no-underline min-h-11;
  }

  .brand-btn--spotify {
    @apply bg-[var(--color-brand-spotify)] text-black border-transparent;
  }

  .brand-btn--apple {
    @apply bg-[var(--color-brand-apple)] text-black border-transparent;
  }

  /* Generic card aliases for legacy markup */
  .card,
  .card-base {
    @apply bg-card text-card-foreground rounded-[var(--radius)] border border-border shadow-xs transition;
  }

  .card:hover,
  .card-base:hover {
    @apply shadow-lg -translate-y-0.5;
  }

  .dark [data-slot="card"],
  .dark .card-base {
    border-color: color-mix(in oklab, var(--color-border), transparent 50%);
  }
  @supports not (color: color-mix(in oklab, white, black)) {
    .dark [data-slot="card"],
    .dark .card-base { border-color: var(--color-border); opacity: .85; }
  }

  /* Nested card border softening to avoid heavy stacking */
  :where([data-slot="card"], .card, .card-base) :where([data-slot="card"], .card, .card-base) {
    border-color: color-mix(in oklab, var(--color-border), transparent 60%);
  }

  /* Platform buttons (shared) */
  .platform-btn {
    @apply flex items-center gap-2 px-4 py-2 border border-border rounded-[var(--radius)] text-[0.9rem] font-semibold text-foreground cursor-pointer transition bg-card w-full justify-center hover:bg-card/90 relative;
  }

  .platform-btn.spotify::before {
    content: "";
    @apply absolute inset-0 border-l-4 border-[var(--color-brand-spotify)] rounded-[var(--radius)] pointer-events-none;
  }

  .platform-btn.apple::before {
    content: "";
    @apply absolute inset-0 border-l-4 border-accent rounded-[var(--radius)] pointer-events-none;
  }

  /* Hub / Embed headers */
  .hub-header {
    @apply flex flex-col gap-3 justify-between items-center mb-6 pb-4 border-b border-border/20;
  }

  .embed-header {
    @apply flex flex-wrap items-center justify-between gap-2 mb-3;
  }

  /* Theme toggle */
  .theme-toggle {
    @apply fixed z-[1100] inline-flex items-center justify-center w-9 h-9 rounded-full border border-border bg-card text-foreground shadow-xs top-[max(.75rem,var(--safe-area-inset-top))] right-[max(.75rem,var(--safe-area-inset-right))] hover:bg-card/90;
  }

  /* Mobile bottom nav */
  .mobile-bottom-nav {
    @apply fixed inset-x-0 bottom-0 bg-card/95 backdrop-blur border-t border-border z-[900] pb-[env(safe-area-inset-bottom,0)] shadow-[0_-2px_10px_rgba(0,0,0,0.05)] md:hidden;
  }

  body.mobile-nav-visible {
    padding-bottom: calc(56px + env(safe-area-inset-bottom, 0px));
  }

  .nav-container {
    @apply flex justify-around items-center h-14 px-2 max-w-[min(500px,100vw)] w-full mx-auto;
  }

  .nav-list {
    @apply list-none m-0 p-0 flex w-full justify-around;
  }

  .nav-li {
    @apply flex flex-1 justify-center;
  }

  .nav-item {
    @apply flex flex-col items-center justify-center bg-transparent cursor-pointer py-2 relative text-muted-foreground transition min-w-11 min-h-11 select-none;
    -webkit-tap-highlight-color: transparent;
  }

  .nav-item:active {
    @apply bg-muted/50;
  }

  .nav-item.active {
    @apply text-accent;
  }

  .nav-icon {
    @apply size-6 transition-transform;
  }

  .nav-item.active .nav-icon {
    @apply scale-110;
  }

  .nav-label {
    @apply text-[0.75rem] font-medium;
  }

  .nav-indicator {
    @apply absolute -bottom-2 size-1 rounded-full bg-primary;
  }

  .nav-badge {
    @apply absolute -top-1 -right-2 bg-destructive text-black text-[0.625rem] font-semibold px-1 rounded-[10px] min-w-4 text-center;
  }

  /* Hero */
  .hero-section {
    @apply relative min-h-dvh grid place-items-center overflow-hidden;
  }

  .hero-background {
    @apply absolute inset-0 bg-background -z-10;
  }

  .hero-background.with-pattern {
    background-size: cover;
    background-position: center;
  }

  .hero-overlay {
    @apply absolute inset-0 from-background/35 to-background/75 bg-gradient-to-b;
  }

  /* Landing page sectional wrappers */
  .events-section,
  .media-section,
  .social-section,
  .gallery-section,
  .platform-section {
    @apply py-12 md:py-16;
    content-visibility: auto;
    contain-intrinsic-size: 520px;
  }

  .hero-content {
    @apply text-center text-foreground p-8 md:p-12 max-w-[800px] z-[1] bg-card rounded-[var(--radius)] border border-border;
  }

  .hero-title {
    @apply text-[clamp(1.5rem,3.2vw,2.25rem)] font-bold mb-3 leading-tight;
  }

  .hero-subtitle {
    @apply text-[clamp(.9rem,2vw,1.1rem)] mb-5 opacity-95;
  }

  @media (max-width: 640px) {
    .hero-section {
      min-height: auto;
      padding-block: 4.5rem 3rem;
    }

    .hero-content {
      margin: 0 1.25rem;
      padding: 1.75rem 1.5rem;
      text-align: left;
    }

    .hero-cta {
      flex-direction: column;
      align-items: stretch;
      gap: 0.75rem;
    }

    .hero-cta > * {
      width: 100%;
    }

    .hero-subtitle {
      font-size: clamp(0.95rem, 4vw, 1.05rem);
    }

    .scroll-indicator {
      bottom: 5.5rem;
    }
  }

  .hero-cta {
    @apply flex gap-4 justify-center flex-wrap;
  }

  .scroll-indicator {
    @apply absolute bottom-8 left-1/2 -translate-x-1/2 text-foreground/60;
  }

  /* About */
  .about-section {
    @apply py-16;
    content-visibility: auto;
    contain-intrinsic-size: 480px;
  }

  .about-grid {
    @apply grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-10 items-center;
  }

  .about-text {
    font-size: 1rem;
    line-height: 1.75;
    letter-spacing: .01em;
  }

  .about-text p {
    @apply mb-4 text-foreground;
  }

  .about-image img {
    @apply w-full h-auto rounded-[var(--radius)] shadow-lg;
  }

  /* Services */
  @media (max-width: 640px) {
    .about-section,
    .services-section,
    .stats-section,
    .events-section,
    .media-section,
    .social-section,
    .gallery-section,
    .photo-gallery,
    .booking-section-minimal {
      padding-block: 3.5rem;
    }
  }

  .services-section {
    @apply py-16 bg-[var(--color-section-bg,var(--color-muted)/0%)];
    content-visibility: auto;
    contain-intrinsic-size: 520px;
  }

  .services-grid {
    @apply grid gap-8 grid-cols-[repeat(auto-fit,minmax(250px,1fr))] max-w-[1000px] mx-auto;
  }

  .service-card {
    @apply text-center p-8 bg-card rounded-[var(--radius)] shadow-xs transition hover:shadow-lg hover:-translate-y-0.5 border border-border;
  }

  .service-icon {
    @apply text-accent text-2xl mb-4;
  }

  .service-title {
    @apply text-xl mb-2 text-foreground;
  }

  .service-description {
    @apply text-muted-foreground leading-relaxed;
  }

  /* Stats */
  .stats-section {
    @apply py-16 bg-[var(--color-section-bg,var(--color-muted)/0%)];
    content-visibility: auto;
    contain-intrinsic-size: 480px;
  }

  .stats-grid {
    @apply grid gap-8 grid-cols-[repeat(auto-fit,minmax(150px,1fr))] max-w-[800px] mx-auto;
  }

  .stat-card {
    @apply text-center p-6 bg-card rounded-[var(--radius)] shadow-xs border border-border;
  }

  .stat-icon {
    @apply text-accent text-2xl mb-3;
  }

  .stat-value {
    @apply text-4xl font-bold text-foreground mb-2;
  }

  .stat-label {
    @apply text-muted-foreground text-sm;
  }

  /* Photo Gallery + Lightbox (keeps class names; uses utilities) */
  .photo-gallery {
    @apply py-16;
    content-visibility: auto;
    contain-intrinsic-size: 520px;
  }

  .gallery-header {
    @apply text-center mb-12;
  }

  .category-filters {
    @apply flex justify-center gap-4 mb-12 flex-wrap;
  }

  .filter-btn {
    @apply px-6 py-3 bg-muted border-2 border-transparent rounded-full text-[0.95rem] font-medium cursor-pointer transition text-foreground hover:bg-accent/10 hover:border-accent;
  }

  .filter-btn.active {
    @apply bg-accent text-primary-foreground border-accent;
  }

  .gallery-grid {
    @apply grid gap-4 grid-cols-[repeat(auto-fill,minmax(150px,1fr))];
  }

  .gallery-item {
    @apply relative overflow-hidden rounded-[var(--radius)] cursor-pointer aspect-[4/3] bg-muted;
  }

  .gallery-item img {
    @apply w-full h-full object-cover transition-transform duration-300;
  }

  .gallery-item:hover img {
    @apply scale-110;
  }

  .photo-overlay {
    @apply absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-4 translate-y-full transition-transform duration-300;
  }

  .gallery-item:hover .photo-overlay {
    @apply translate-y-0;
  }

  @media (hover: none) {
    .photo-overlay {
      transform: translateY(0);
    }
  }

  .photo-overlay p {
    @apply text-white text-[0.95rem] font-semibold inline-block px-2 py-1 rounded-md bg-black/60;
  }

  .lightbox-overlay {
    @apply fixed inset-0 bg-black/90 backdrop-blur-sm animate-[fadeIn_.3s_ease] z-[2000];
  }

  .lightbox-content {
    @apply fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 max-w-[90vw] max-h-[90vh] z-[2001] animate-[slideIn_.3s_ease];
  }

  .lightbox-content img {
    @apply max-w-full max-h-[80vh] object-contain rounded-[var(--radius)];
  }

  .lightbox-nav,
  .lightbox-close {
    @apply absolute bg-white/10 text-white size-10 rounded-full grid place-items-center cursor-pointer transition hover:bg-white/20 z-[2002];
  }

  .lightbox-close {
    @apply top-4 right-4;
  }

  .lightbox-prev {
    @apply top-1/2 -translate-y-1/2 left-4;
  }

  .lightbox-next {
    @apply top-1/2 -translate-y-1/2 right-4;
  }

  .lightbox-caption {
    @apply text-center text-white mt-4;
  }

  /* Platform Launcher (inline / modal / FAB) */
  .platform-launcher {
    --platform-button-bg: var(--color-card);
    --platform-button-border: var(--color-border);
    --platform-button-hover-bg: color-mix(in oklab, var(--color-card) 92%, hsl(0 0% 0% / 8%));
  }

  .dark .platform-launcher {
    --platform-button-bg: var(--color-secondary);
    --platform-button-border: color-mix(in oklab, var(--color-border) 70%, transparent);
    --platform-button-hover-bg: color-mix(in oklab, var(--color-secondary) 92%, hsl(0 0% 0% / 8%));
  }

  .platform-launcher__button {
    @apply relative cursor-pointer transition bg-[var(--platform-button-bg)] border border-[var(--platform-button-border)] rounded-[var(--radius)] hover:bg-[var(--platform-button-hover-bg)];
  }

  .platform-launcher__icon {
    color: var(--platform-color);
    transition: transform .2s ease;
    flex-shrink: 0;
  }

  .platform-launcher__icon--sm {
    @apply size-5;
  }

  .platform-launcher__icon--md {
    @apply size-7;
  }

  .platform-launcher__icon--lg {
    @apply size-8;
  }

  .platform-launcher-inline {
    @apply py-8;
  }

  .platform-launcher-title {
    @apply text-center mb-8 text-xl font-bold text-foreground;
  }

  footer .platform-launcher-title {
    color: #fff;
  }

  .platform-grid {
    @apply grid gap-4 grid-cols-[repeat(auto-fit,minmax(200px,1fr))] max-w-[800px] mx-auto;
  }

  .platform-grid .platform-card {
    @apply flex items-center justify-between px-4 py-3 bg-card rounded-[var(--radius)] border cursor-pointer transition text-[0.9rem] font-semibold text-foreground hover:bg-card/90;
    border-color: var(--platform-color, var(--color-border));
  }

  .platform-icon {
    @apply text-2xl mr-3;
  }

  .platform-name {
    @apply grow text-left;
  }

  .platform-external-icon {
    @apply opacity-60 transition;
  }

  .platform-grid .platform-card:hover .platform-external-icon {
    @apply opacity-100;
  }

  /* Modal mode */
  .platform-launcher-overlay {
    @apply fixed inset-0 bg-black/50 backdrop-blur-sm z-[999];
  }

  .platform-launcher-modal {
    @apply fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-card rounded-[var(--radius)] p-8 max-w-[500px] w-[90%] max-h-[80vh] overflow-y-auto z-[1000] border border-border;
  }

  .platform-modal-grid {
    @apply grid gap-4 sm:grid-cols-2;
  }

  .platform-modal-button {
    @apply flex flex-col items-center justify-center p-6 bg-card border border-border rounded-[var(--radius)] transition min-h-24 hover:border-accent hover:bg-card/90;
  }

  .modal-close {
    @apply absolute top-4 right-4 bg-transparent border-0 text-muted-foreground p-2 rounded-full transition hover:bg-card/90;
  }

  /* FAB */
  :root {
    --fab-bottom-offset: 2rem;
  }

  body.mobile-nav-visible {
    --fab-bottom-offset: 5rem;
  }

  .platform-launcher--fab {
    @apply fixed right-4 z-[900] transition-all;
    bottom: var(--fab-bottom-offset);
  }

  .platform-launcher__fab-trigger {
    @apply size-12 rounded-full border-0 cursor-pointer grid place-items-center text-white shadow-lg transition;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent) 100%);
  }

  .platform-launcher__fab-trigger:hover {
    box-shadow: 0 6px 20px color-mix(in oklab, var(--color-accent) 60%, transparent);
  }

  .platform-launcher__fab-menu {
    @apply absolute -top-3 right-0 translate-y-[-100%] w-[250px] bg-card rounded-2xl p-4 shadow-lg border border-border;
  }

  .platform-launcher__fab-platforms {
    @apply flex flex-col gap-2;
  }

  .platform-launcher__fab-button {
    @apply flex items-center px-4 py-3 bg-transparent border border-border rounded-lg transition text-[0.9rem] text-foreground hover:bg-[var(--platform-color)] hover:border-[var(--platform-color)] hover:text-white -translate-x-0 hover:-translate-x-1;
  }

  .platform-launcher__fab-backdrop {
    @apply fixed inset-0 bg-black/30 backdrop-blur-sm z-[899];
  }
  /* Alias for component compatibility */
  .fab-backdrop {
    @apply fixed inset-0 bg-black/30 backdrop-blur-sm z-[899];
  }

  /* Music hub + embeds (Spotify / Apple Music) */
  .music-hub {
    @apply px-5 py-10 max-w-[1200px] mx-auto;
  }

  .music-hub .hub-header {
    @apply text-center;
  }

  .music-hub .hub-header h2 {
    background: linear-gradient(135deg, var(--color-brand-spotify), var(--color-accent));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .track-list {
    @apply grid gap-2.5;
  }

  .track-item {
    @apply flex items-center justify-between px-5 py-4 bg-muted border-2 border-transparent rounded-[var(--radius)] text-left cursor-pointer transition hover:border-accent hover:translate-x-1;
  }

  .track-item.active {
    @apply border-accent translate-x-1;
  }

  .spotify-embed-container,
  .apple-music-embed-container {
    @apply bg-card rounded-[var(--radius)] p-4 sm:p-5 my-5 border border-border shadow-xs dark:bg-card/80;
  }

  .streaming-cta {
    @apply text-center px-4 py-3 bg-muted/30 rounded-[var(--radius)] mt-4 text-sm text-muted-foreground;
  }

  .spotify-embed-wrapper {
    @apply bg-card rounded-[var(--radius)] p-4 sm:p-5 my-5 border border-border shadow-xs dark:bg-card/80;
  }

  .spotify-iframe-container,
  .apple-iframe-container {
    @apply w-full rounded-xl overflow-hidden bg-transparent relative min-h-[152px];
  }

  .spotify-iframe-container iframe {
    @apply w-full h-full rounded-xl border-0;
  }

  .dark .spotify-iframe-container {
    @apply bg-card/5;
  }

  .embed-loading {
    @apply flex flex-col items-center justify-center gap-3 text-center text-muted-foreground bg-muted/40 border border-border/60 rounded-[var(--radius)] px-4 py-8;
  }

  .embed-loading p {
    @apply text-sm;
  }

  .embed-fallback {
    @apply flex flex-col items-center justify-center gap-3 text-center text-muted-foreground bg-muted/40 border border-border/60 rounded-[var(--radius)] px-6 py-10;
  }

  .embed-actions {
    @apply flex gap-3 mt-4 flex-wrap flex-col sm:flex-row;
  }

  .action-btn {
    @apply inline-flex items-center justify-center gap-2 px-6 py-3 rounded-[var(--radius)] font-semibold cursor-pointer transition border text-[0.9rem] text-center flex-1 min-w-[120px] w-full min-h-11 ring-0 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-ring)]/40;
  }

  .login-btn,
  .add-library-btn,
  .play-btn {
    @apply bg-foreground text-background border-foreground hover:brightness-95;
  }

  .subscription-cta {
    @apply flex flex-col sm:flex-row items-stretch sm:items-center justify-center gap-3 mt-5 p-4 bg-card rounded-[var(--radius)] text-foreground border border-border;
  }

  .subscribe-btn {
    @apply inline-flex items-center justify-center bg-foreground text-background border border-foreground px-6 py-3 rounded-[var(--radius)] font-semibold cursor-pointer transition hover:brightness-95;
  }

  /* Instagram & Facebook hubs (wrappers + embeds) */
  .instagram-embed-wrapper,
  .facebook-embed-wrapper,
  .facebook-page-container {
    @apply bg-card rounded-[var(--radius)] p-4 sm:p-5 my-5 border border-border shadow-xs dark:bg-card/80;
  }

  .instagram-embed-content iframe,
  .instagram-embed-content blockquote {
    @apply border-0 shadow-none bg-transparent max-w-full;
  }

  /* Dynamic Social Feed */
  .dynamic-social-feed {
    @apply py-8;
  }

  .feed-header {
    @apply flex items-center justify-between mb-8;
  }

  .feed-header h3 {
    @apply text-xl font-bold text-foreground;
  }

  .feed-notice {
    @apply bg-card p-4 rounded-[var(--radius)] mb-6 text-foreground border border-border text-sm;
  }

  .social-feed-grid {
    @apply grid gap-6 grid-cols-[repeat(auto-fill,minmax(300px,1fr))] md:grid-cols-[repeat(auto-fill,minmax(250px,1fr))] sm:grid-cols-1;
  }

  .social-post-card {
    @apply bg-card border border-border rounded-[var(--radius)] overflow-hidden transition cursor-pointer hover:-translate-y-1 hover:shadow-lg;
  }

  .social-post-card.shoppable {
    @apply border-accent/30;
  }

  .post-header {
    @apply flex items-center justify-between px-4 py-3 bg-muted/50;
  }

  .platform-badge {
    @apply inline-flex items-center gap-1 px-3 py-1 rounded-full text-[0.75rem] font-semibold uppercase bg-muted text-foreground;
  }

  .platform-badge.instagram {
    background: #2d0a47;
    color: #fff;
  }

  .platform-badge.facebook {
    background: #0a5bd3;
    color: #fff;
  }

  .shoppable-badge {
    @apply inline-flex items-center gap-1 px-3 py-1 rounded-full text-[0.75rem] font-semibold bg-green-800 text-white;
  }

  .post-media {
    @apply relative aspect-square overflow-hidden bg-muted;
  }

  .post-media img {
    @apply w-full h-full object-cover transition-transform duration-300 group-hover:scale-105;
  }

  .media-type-indicator {
    @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 size-12 bg-black/70 text-white rounded-full grid place-items-center text-xl pointer-events-none;
  }

  .product-tags {
    @apply absolute inset-0 pointer-events-none;
  }

  .product-tag {
    @apply absolute size-8 bg-white border-2 border-accent rounded-full grid place-items-center -translate-x-1/2 -translate-y-1/2 transition pointer-events-auto cursor-pointer z-10;
  }

  .product-tag:hover,
  .product-tag.active {
    @apply scale-110 bg-accent text-white;
  }

  .product-tooltip {
    @apply absolute -bottom-3 left-1/2 -translate-x-1/2 translate-y-full bg-white border border-border rounded-[var(--radius)] p-2 min-w-[150px] shadow-lg pointer-events-none;
  }

  .product-tooltip img {
    @apply size-15 object-cover rounded;
  }

  .product-title {
    @apply text-[0.85rem] font-semibold text-foreground mb-1;
  }

  .product-price {
    @apply text-[0.9rem] text-accent font-bold;
  }

  .post-engagement {
    @apply flex gap-4 p-4 border-b border-border;
  }

  .engagement-btn {
    @apply inline-flex items-center gap-1 text-muted-foreground transition hover:text-accent;
  }

  .engagement-btn span {
    @apply text-[0.85rem] font-medium;
  }

  .post-caption {
    @apply p-4;
  }

  .post-caption p {
    @apply m-0 text-[0.9rem] text-foreground leading-relaxed;
  }

  /* Next Event Banner ---------------------------------------------------- */
  .next-event-banner {
    @apply py-12;
  }

  .next-event-banner .container {
    @apply max-w-5xl mx-auto px-4;
  }

  .next-event-card {
    @apply grid gap-6 rounded-[var(--radius-lg)] border border-border/40 bg-card/90 p-6 shadow-lg transition-all duration-200;
    backdrop-filter: blur(18px);
    grid-template-columns: minmax(0, 1fr);
  }

  .next-event-card[data-hoverable="true"]:hover {
    @apply shadow-xl lg:-translate-y-1;
  }

  @media (min-width: 48rem) {
    .next-event-card {
      grid-template-columns: minmax(0, 0.9fr) minmax(0, 1.1fr);
      @apply items-center;
    }
  }

  .next-event-flyer {
    @apply m-0;
  }

  .next-event-flyer-frame {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem;
    border-radius: var(--radius-lg);
    background: radial-gradient(circle at top, rgba(255, 255, 255, 0.08), transparent 65%),
      linear-gradient(145deg, rgba(255, 255, 255, 0.05), rgba(0, 0, 0, 0.25));
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08), 0 12px 30px rgba(0, 0, 0, 0.35);
  }

  .next-event-flyer-frame::before {
    content: "";
    position: absolute;
    inset: 6px;
    border-radius: calc(var(--radius-lg) - 6px);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(0, 0, 0, 0.35));
    opacity: 0.6;
    pointer-events: none;
  }

  .next-event-flyer-frame img {
    position: relative;
    z-index: 1;
    width: 100%;
    height: auto;
    border-radius: calc(var(--radius-lg) - 10px);
    max-height: 640px;
    aspect-ratio: var(--next-event-flyer-aspect, 4 / 5);
    object-fit: contain;
  }

  .next-event-flyer[data-mode='cover'] .next-event-flyer-frame img {
    object-fit: cover;
  }

  .next-event-flyer-placeholder {
    @apply grid place-content-center gap-2 rounded-[var(--radius-lg)] border border-dashed border-border/60 bg-muted/40 text-muted-foreground text-center px-8 py-16;
    min-height: 320px;
  }

  .next-event-info {
    @apply space-y-4;
  }

  .next-event-heading {
    @apply text-[clamp(1rem,2vw,1.2rem)] uppercase tracking-[0.2em] text-accent/90 font-semibold m-0;
  }

  .next-event-when {
    @apply flex flex-col gap-3;
  }

  @media (min-width: 40rem) {
    .next-event-when {
      @apply flex-row items-center justify-between;
    }
  }

  .next-event-date {
    @apply flex flex-col text-[1.05rem] font-semibold text-foreground;
  }

  .next-event-date time {
    @apply text-[1.4rem] font-bold;
  }

  .next-event-location {
    @apply inline-flex items-center gap-2 text-sm text-muted-foreground;
  }

  .next-event-title {
    @apply text-[clamp(1.3rem,3vw,1.85rem)] font-bold text-foreground;
  }

  .next-event-snippet {
    @apply text-sm text-muted-foreground leading-relaxed m-0;
  }

  .next-event-user-time {
    @apply text-sm font-medium text-accent m-0;
  }

  .next-event-actions {
    @apply flex flex-wrap gap-3 items-center;
  }

  .next-event-actions .btn {
    @apply whitespace-nowrap;
  }

  .next-event-details-link {
    @apply inline-flex items-center gap-2 text-accent-600 font-semibold underline underline-offset-4 hover:text-accent;
  }

  .next-event-share-row {
    @apply flex flex-wrap gap-2 items-center text-sm text-muted-foreground;
  }

  .next-event-feedback {
    @apply text-sm text-accent-600 mt-2;
  }

  /* Event Details Page --------------------------------------------------- */
  .event-details-page {
    @apply py-16;
  }

  .event-details-page .container {
    @apply max-w-5xl mx-auto px-4 space-y-12;
  }

  .event-details-back {
    @apply inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-accent;
  }

  .event-details-card {
    @apply rounded-[var(--radius-lg)] border border-border/40 bg-card/95 shadow-xl p-6 space-y-10;
    backdrop-filter: blur(20px);
  }

  .event-details-card[data-hoverable="true"]:hover {
    @apply shadow-2xl;
  }

  .event-details-card--loading {
    @apply pointer-events-none;
  }

  .event-details-hero {
    display: grid;
    gap: 2rem;
    grid-template-columns: minmax(0, 1fr);
  }

  @media (min-width: 62rem) {
    .event-details-hero {
      grid-template-columns: minmax(0, 0.95fr) minmax(0, 1.05fr);
      align-items: center;
    }
  }

  .event-details-flyer {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    border-radius: var(--radius-lg);
    background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.15), transparent 70%),
      linear-gradient(160deg, rgba(255, 255, 255, 0.08), rgba(0, 0, 0, 0.4));
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 18px 40px rgba(0, 0, 0, 0.4);
  }

  .event-details-flyer img {
    position: relative;
    z-index: 1;
    width: 100%;
    height: auto;
    border-radius: calc(var(--radius-lg) - 12px);
    max-height: 720px;
    aspect-ratio: var(--event-flyer-aspect, 4 / 5);
    object-fit: contain;
  }

  .event-details-flyer::before {
    content: "";
    position: absolute;
    inset: 10px;
    border-radius: calc(var(--radius-lg) - 10px);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.2), rgba(0, 0, 0, 0.45));
    opacity: 0.65;
    pointer-events: none;
  }

  .event-details-flyer--placeholder {
    @apply grid place-content-center gap-2 text-center text-muted-foreground border border-dashed border-border/60 bg-muted/30;
    min-height: 320px;
  }

  .event-details-summary {
    @apply space-y-4;
  }

  .event-details-summary h1 {
    @apply text-[clamp(1.6rem,3.5vw,2.4rem)] font-bold text-foreground m-0;
  }

  .event-details-when {
    @apply text-[1.05rem] text-foreground font-medium m-0;
  }

  .event-details-location,
  .event-details-venue,
  .event-details-user-time,
  .event-details-price {
    @apply text-sm text-muted-foreground m-0;
  }

  .event-details-user-time {
    @apply text-accent font-semibold;
  }

  .event-details-actions {
    @apply flex flex-wrap gap-3 items-center pt-2;
  }

  .event-details-summary-text {
    @apply text-base leading-relaxed text-foreground/90 italic;
  }

  .event-details-feedback {
    @apply text-sm text-accent-600;
  }

  .event-details-description {
    @apply space-y-4;
  }

  .event-details-description h2,
  .event-details-meta h2,
  .event-details-related h2 {
    @apply text-xl font-semibold text-foreground mb-3;
  }

  .event-details-description p {
    @apply text-base leading-relaxed text-foreground/90;
  }

  .event-details-meta dl {
    @apply grid gap-4;
  }

  .event-details-meta dt {
    @apply text-sm uppercase tracking-[0.15em] text-muted-foreground;
  }

  .event-details-meta dd {
    @apply text-base font-medium text-foreground m-0;
  }

  .event-details-location-line {
    @apply block;
  }

  .event-details-tags {
    @apply flex flex-wrap gap-2;
  }

  .event-details-tags span {
    @apply inline-flex items-center gap-1 px-3 py-1 rounded-full bg-muted/60 text-sm text-muted-foreground;
  }

  .event-details-media,
  .event-details-map,
  .event-details-faq,
  .event-details-gallery {
    @apply space-y-4;
  }

  .event-details-media-frame,
  .event-details-map-frame {
    position: relative;
    padding-bottom: min(56.25%, 480px);
    height: 0;
    overflow: hidden;
    border-radius: var(--radius-lg);
    border: 1px solid color-mix(in srgb, var(--color-border) 70%, transparent);
    background: rgba(0, 0, 0, 0.4);
    box-shadow: 0 20px 45px rgba(0, 0, 0, 0.35);
  }

  .event-details-media-frame iframe,
  .event-details-map-frame iframe {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    border: 0;
    border-radius: inherit;
  }

  .event-details-faq-list {
    @apply space-y-3;
  }

  .event-details-faq-item {
    @apply rounded-[var(--radius-lg)] border border-border/40 bg-muted/30 px-5 py-4;
  }

  .event-details-faq-item summary {
    @apply cursor-pointer text-base font-semibold text-foreground;
  }

  .event-details-faq-item[open] {
    @apply bg-muted/40;
  }

  .event-details-faq-item p {
    @apply mt-3 text-sm leading-relaxed text-foreground/90;
  }

  .event-details-gallery-grid {
    @apply grid gap-4;
  }

  @media (min-width: 48rem) {
    .event-details-gallery-grid {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
  }

  .event-details-gallery-item {
    position: relative;
    overflow: hidden;
    border-radius: var(--radius);
    border: 1px solid color-mix(in srgb, var(--color-border) 70%, transparent);
  }

  .event-details-gallery-item img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.4s ease;
  }

  .event-details-gallery-item:hover img {
    transform: scale(1.05);
  }

  .event-details-related-grid {
    @apply grid gap-6;
  }

  @media (min-width: 50rem) {
    .event-details-related-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  .event-details-empty {
    @apply rounded-[var(--radius-lg)] border border-border/60 bg-muted/40 p-10 text-center space-y-4;
  }

  .event-details-empty h1 {
    @apply text-2xl font-semibold;
  }

  /* Skeleton state */
  .next-event-card--loading {
    @apply pointer-events-none;
  }

  .skeleton-gradient {
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.12) 37%, rgba(255, 255, 255, 0.05) 63%);
    background-size: 400% 100%;
    animation: skeletonPulse 1.4s ease infinite;
  }

  .skeleton-block {
    @apply rounded-[var(--radius-lg)] bg-muted/40;
    min-height: 240px;
  }
  .skeleton-block::before {
    content: "";
    @apply block h-full w-full rounded-[inherit];
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.12) 37%, rgba(255, 255, 255, 0.05) 63%);
    background-size: 400% 100%;
    animation: skeletonPulse 1.4s ease infinite;
  }

  .skeleton-pill,
  .skeleton-line,
  .skeleton-button {
    @apply bg-muted/40 rounded-full;
    position: relative;
    overflow: hidden;
  }

  .skeleton-pill {
    width: 120px;
    height: 16px;
  }

  .skeleton-line {
    height: 14px;
  }

  .skeleton-line--title {
    width: 70%;
    height: 22px;
  }

  .skeleton-line--short {
    width: 45%;
  }

  .skeleton-button-row {
    @apply flex gap-2 mt-4;
  }

  .skeleton-button {
    width: 96px;
    height: 36px;
  }

  .skeleton-pill::after,
  .skeleton-line::after,
  .skeleton-button::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.25) 50%, rgba(255, 255, 255, 0) 100%);
    background-size: 200% 100%;
    animation: skeletonPulse 1.4s ease infinite;
  }

  @keyframes skeletonPulse {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }

  /* Facebook Events (list/grid/timeline/compact + modal) */
  .facebook-events {
    @apply py-8;
  }

  .events-header {
    @apply flex items-center justify-between gap-4 flex-wrap mb-8;
  }

  .events-header h3 {
    @apply text-xl font-bold text-foreground flex items-center gap-2;
  }

  .events-notice {
    @apply bg-muted p-4 rounded-[var(--radius)] mb-6 text-muted-foreground text-sm;
  }

  .events-empty {
    @apply text-center p-12 text-muted-foreground;
  }

  /* 5.7 Events – Local Event Cards (EventCard.tsx) ---------------------- */
  /* Local event card used in EventGrid for /api/events data */
  .local-event-card {
    @apply bg-card border border-border rounded-[var(--radius-lg)] overflow-hidden p-6 space-y-4 transition hover:shadow-lg hover:-translate-y-0.5;
  }

  .local-event-card .event-flyer {
    @apply w-full rounded-lg overflow-hidden;
    max-height: 540px;
  }

  .local-event-card .event-flyer img {
    @apply w-full h-full object-cover;
  }

  .local-event-card .event-meta-row {
    @apply flex gap-4;
  }

  .local-event-card .event-date {
    @apply flex flex-col items-center justify-center min-w-[64px] px-3 py-2 bg-accent text-white rounded-lg;
  }

  .local-event-card .event-date .month {
    @apply text-xs uppercase font-bold tracking-wide;
  }

  .local-event-card .event-date .day {
    @apply text-2xl font-extrabold leading-none;
  }

  .local-event-card .event-info {
    @apply flex-1 space-y-2;
  }

  .local-event-card .event-info h3 {
    @apply text-xl font-bold text-foreground m-0;
  }

  .local-event-card .event-info .event-time {
    @apply text-sm text-muted-foreground;
  }

  .local-event-card .event-info .event-user-time {
    @apply text-sm text-accent-600 font-medium;
  }

  .local-event-card .event-info .event-summary {
    @apply text-sm text-foreground/85;
  }

  .local-event-card .event-info .event-price {
    @apply text-sm font-medium text-foreground;
  }

  .local-event-card .event-actions-row {
    @apply flex flex-wrap gap-2 items-center;
  }

  /* Local events list container */
  .events-list {
    @apply flex flex-col gap-6;
  }

  .events-bulk-actions {
    @apply mt-6 flex gap-3 items-center;
  }

  .events-past-section {
    @apply mt-10;
  }

  /* 5.8 Events – Facebook Integration ----------------------------------- */
  .fb-events-list {
    @apply flex flex-col gap-6;
  }

  .event-card {
    @apply bg-card border border-border rounded-[var(--radius)] overflow-hidden transition cursor-pointer hover:-translate-y-0.5 hover:shadow-lg;
  }

  .event-card.canceled {
    @apply opacity-60;
  }

  .event-cover {
    @apply relative h-[200px] overflow-hidden bg-muted;
  }

  .event-cover img {
    @apply w-full h-full object-cover;
  }

  .canceled-overlay {
    @apply absolute inset-0 bg-black/70 grid place-items-center text-white text-2xl font-bold;
  }

  .event-details {
    @apply p-6;
  }

  .event-date {
    @apply flex items-center gap-2 text-accent text-sm font-medium mb-2;
  }

  .event-name {
    @apply text-xl font-bold text-foreground m-0 mb-3;
  }

  .event-description {
    @apply text-muted-foreground leading-relaxed mb-4;
  }

  .event-meta {
    @apply flex flex-col gap-3 mb-6;
  }

  .event-location {
    @apply flex items-center gap-1 text-foreground text-sm;
  }

  .event-location .city {
    @apply text-muted-foreground;
  }

  .online-badge {
    @apply inline-flex px-3 py-1 rounded-full text-[0.75rem] font-semibold bg-[hsl(160_84%_39%)] text-white;
  }

  .event-stats {
    @apply flex gap-4 text-muted-foreground text-[0.85rem];
  }

  .event-stats .stat {
    @apply inline-flex items-center gap-1;
  }

  .event-actions {
    @apply flex gap-4;
  }

  .fb-events-grid {
    @apply grid gap-6 grid-cols-[repeat(auto-fill,minmax(280px,1fr))];
  }

  .event-grid-card {
    @apply bg-card border border-border rounded-[var(--radius)] overflow-hidden transition hover:-translate-y-0.5 hover:shadow-lg cursor-pointer;
  }

  .event-grid-cover {
    @apply relative h-[150px] overflow-hidden bg-muted;
  }

  .event-grid-cover img {
    @apply w-full h-full object-cover;
  }

  .canceled-badge {
    @apply absolute top-4 right-4 px-3 py-1 rounded bg-destructive text-black text-[0.75rem] font-semibold;
  }

  .online-indicator {
    @apply absolute top-4 left-4 px-3 py-1 rounded bg-emerald-900 text-white text-[0.75rem] font-semibold;
  }

  .event-grid-content {
    @apply p-4;
  }

  .event-grid-date {
    @apply text-accent text-[0.85rem] font-medium mb-2;
  }

  .event-grid-name {
    @apply text-[1.1rem] font-semibold text-foreground m-0 mb-2 leading-snug;
  }

  .event-grid-location {
    @apply text-muted-foreground text-sm mb-3;
  }

  .event-grid-stats {
    @apply text-muted-foreground text-[0.85rem];
  }

  .fb-events-timeline {
    @apply relative pl-12;
  }

  .timeline-item {
    @apply relative mb-8;
  }

  .timeline-marker {
    @apply absolute -left-12 size-10 bg-accent text-white rounded-full grid place-items-center z-[2];
  }

  .timeline-line {
    @apply absolute -left-[1.3rem] top-10 w-[2px] bg-border;
    height: calc(100% + 2rem);
    z-index: 1;
  }

  .timeline-date {
    @apply text-muted-foreground text-[0.85rem] mb-2;
  }

  .timeline-card {
    @apply bg-card border border-border rounded-[var(--radius)] p-4 transition hover:shadow-xs cursor-pointer;
  }

  .timeline-card h4 {
    @apply text-[1.1rem] font-semibold m-0 mb-2;
  }

  .timeline-location {
    @apply flex items-center gap-1 text-muted-foreground text-sm mb-4;
  }

  .fb-events-compact {
    @apply flex flex-col gap-3;
  }

  .compact-event {
    @apply flex gap-4 p-3 bg-card border border-border rounded-[var(--radius)] no-underline transition hover:bg-muted/50 hover:translate-x-1;
  }

  .compact-date {
    @apply grid place-items-center min-w-[50px] px-2 py-1 bg-accent text-white rounded-lg;
  }

  .compact-date .day {
    @apply text-xl font-extrabold leading-none;
  }

  .compact-date .month {
    @apply text-[0.75rem] uppercase;
  }

  .compact-info h5 {
    @apply text-[0.95rem] font-semibold text-foreground m-0 mb-1;
  }

  .compact-info p {
    @apply text-[0.85rem] text-muted-foreground m-0;
  }

  .event-modal {
    @apply fixed inset-0 bg-black/80 z-[9999] grid place-items-center p-8 animate-[fadeIn_.3s_ease];
  }

  .modal-content {
    @apply relative max-w-[600px] w-full max-h-[90vh] overflow-y-auto bg-card rounded-[var(--radius)] border border-border;
  }

  .modal-close {
    @apply absolute top-4 right-4 size-10 grid place-items-center rounded-full bg-black/50 text-white text-xl cursor-pointer transition hover:bg-black/70 z-10;
  }

  .modal-cover {
    @apply w-full h-[250px] object-cover rounded-t-[var(--radius)];
  }

  .modal-body {
    @apply p-8;
  }

  .modal-body h2 {
    @apply text-2xl font-bold m-0 mb-6;
  }

  .modal-meta {
    @apply flex flex-col gap-4 mb-6 text-foreground;
  }

  .modal-meta>div {
    @apply flex items-start gap-2;
  }

  .address {
    @apply ml-6 text-muted-foreground text-sm;
  }

  .modal-description {
    @apply leading-relaxed text-foreground mb-8;
  }

  .modal-actions {
    @apply flex gap-4;
  }

  /* Ecommerce (product cards/grid, checkout essentials, forms, cart) */
  .product-grid {
    @apply grid gap-6 grid-cols-[repeat(auto-fill,minmax(280px,1fr))] md:grid-cols-[repeat(2,1fr)] md:gap-4 sm:grid-cols-1 sm:gap-6;
  }

  .product-card {
    @apply bg-card border border-border rounded-[var(--radius)] overflow-hidden transition hover:-translate-y-1 hover:shadow-lg flex flex-col;
  }

  .product-card__image {
    @apply w-full aspect-square object-cover bg-muted;
  }

  .product-card__content {
    @apply p-4 flex flex-col grow;
  }

  .product-card__title {
    @apply text-[1.125rem] font-semibold text-foreground mb-2 break-words;
  }

  .product-card__actions {
    @apply flex gap-2 mt-auto sm:flex-row sm:w-auto;
  }

  .product-card__actions .btn {
    @apply w-full sm:w-auto;
  }

  .checkout-container {
    @apply max-w-[1200px] mx-auto py-8 px-4;
  }

  .checkout-grid {
    @apply grid gap-8 items-start lg:grid-cols-[1fr_400px];
  }

  .checkout-section {
    @apply bg-card border border-border rounded-[var(--radius)] p-6;
  }

  .checkout-section__title {
    @apply text-xl font-semibold m-0 mb-4 text-foreground;
  }

  /* Checkout summary positioning handled by Phase 1 mobile-first styles (line ~2830) */

  .form-field {
    @apply mb-5 last:mb-0;
  }

  .form-label {
    @apply block text-sm font-medium mb-2 text-foreground;
  }

  .form-label--required::after {
    content: " *";
    @apply text-destructive;
  }

  .form-input,
  .form-select,
  .form-textarea {
    @apply w-full px-4 py-3 text-base border border-border rounded-[calc(var(--radius)*.75)] bg-background text-foreground transition hover:border-muted-foreground focus:outline-none focus:border-ring focus:ring-3 focus:ring-[var(--color-ring)]/20 dark:bg-card;
  }

  .form-input-sm,
  .form-select-sm,
  .form-textarea-sm {
    @apply px-2 py-1.5 text-[0.9rem];
  }

  .form-input--error,
  .form-select--error,
  .form-textarea--error {
    @apply border-destructive;
  }

  .form-error {
    @apply block text-sm text-destructive mt-1;
  }

  .form-helper {
    @apply block text-sm text-muted-foreground mt-1;
  }

  .form-grid-2 {
    @apply grid gap-4 sm:grid-cols-1 md:grid-cols-[repeat(2,1fr)];
  }

  .form-grid-3 {
    @apply grid gap-4 sm:grid-cols-1 md:grid-cols-[repeat(3,1fr)];
  }

  .form-grid-4 {
    @apply grid gap-4 sm:grid-cols-1 lg:grid-cols-[repeat(4,1fr)];
  }

  .cart-item {
    @apply flex gap-4 p-4 border-b border-border relative;
  }

  .cart-item:last-child {
    @apply border-b-0;
  }

  .cart-item__image {
    @apply w-20 h-20 object-cover rounded-md bg-muted;
  }

  .cart-item__details {
    @apply grow;
  }

  .cart-item__name {
    @apply font-medium mb-1 break-words;
  }

  .cart-item__variant {
    @apply text-sm text-muted-foreground;
  }

  .cart-item__actions {
    @apply flex items-center gap-2;
  }

  .cart-item__remove {
    @apply absolute top-2 right-2;
  }

  .quantity-selector {
    @apply inline-flex items-center border border-border rounded-md;
  }

  .quantity-selector__btn {
    @apply px-3 py-1 bg-transparent border-0 cursor-pointer text-foreground transition hover:bg-muted disabled:opacity-30 disabled:cursor-not-allowed;
  }

  .quantity-selector__value {
    @apply px-3 py-1 min-w-12 text-center border-x border-border;
  }

  .cart-summary {
    @apply bg-card border border-border rounded-[var(--radius)] p-6;
  }

  .cart-summary__row {
    @apply flex justify-between py-2;
  }

  .cart-summary__row--total {
    @apply border-t-2 border-border mt-2 pt-4 text-xl font-bold;
  }

  /* Shipping options */
  .shipping-option {
    @apply flex items-center justify-between w-full p-4 border-2 border-border rounded-[var(--radius)] bg-card transition cursor-pointer hover:border-primary/50 hover:bg-accent/10;
  }

  .shipping-option--selected {
    @apply border-primary bg-primary/10;
  }

  .shipping-option__name {
    @apply font-medium text-foreground;
  }

  .shipping-option__price {
    @apply font-bold text-primary ml-auto;
  }

  /* Loading & skeletons */
  .loading-fallback {
    @apply flex flex-col items-center justify-center gap-3 py-8 text-muted-foreground text-sm;
  }

  .loading-spinner {
    @apply inline-block size-5 border-2 border-muted rounded-full border-t-accent animate-spin;
  }

  .loading-spinner--large {
    @apply size-10 border-[3px];
  }

  .loading-overlay {
    @apply absolute inset-0 bg-background/80 backdrop-blur-sm grid place-items-center z-50;
  }

  .skeleton {
    @apply rounded-md bg-gradient-to-r from-muted via-muted/50 to-muted bg-[length:200%_100%] animate-[shimmer_1.5s_infinite];
  }

  .skeleton-text {
    @apply h-4 mb-2;
  }

  .skeleton-title {
    @apply h-6 w-[60%] mb-4;
  }

  .embed-skeleton {
    @apply relative w-full rounded-[calc(var(--radius)*.75)] overflow-hidden bg-muted;
  }

  .embed-skeleton .skeleton-pulse {
    @apply absolute inset-0 bg-gradient-to-r from-transparent via-muted/50 to-transparent animate-[shimmer_1.5s_infinite];
  }

  /* Alerts */
  .alert {
    @apply p-4 rounded-[var(--radius)] mb-4 flex items-start gap-3 border;
  }

  .alert__icon {
    @apply shrink-0 size-5;
  }

  .alert--success {
    @apply bg-[hsl(160_84%_39%/_0.1)] border-[hsl(160_84%_39%/_0.3)] text-[hsl(160_84%_35%)];
  }

  .alert--error {
    @apply bg-[hsl(0_84.2%_60.2%/_0.1)] border-[hsl(0_84.2%_60.2%/_0.3)] text-[hsl(0_84.2%_60.2%)];
  }

  .alert--info {
    @apply bg-accent/10 border-accent/30 text-accent-700;
  }

  .alert--warning {
    @apply bg-[hsl(36_100%_50%/_0.1)] border-[hsl(36_100%_50%/_0.3)] text-[hsl(36_100%_35%)];
  }

  /* Booking — minimal CTA + full form */
  .booking-section-minimal {
    background: linear-gradient(135deg, color-mix(in oklab, var(--color-primary) 5%, transparent) 0%, color-mix(in oklab, var(--color-accent) 5%, transparent) 100%);
    @apply py-12 md:py-16;
    content-visibility: auto;
    contain-intrinsic-size: 460px;
  }

  .dark .booking-section-minimal {
    background: linear-gradient(135deg, color-mix(in oklab, var(--color-primary) 10%, transparent) 0%, color-mix(in oklab, var(--color-accent) 10%, transparent) 100%);
  }

  .booking-content {
    @apply text-center max-w-[400px] md:max-w-[600px] mx-auto px-4;
  }

  .booking-title {
    @apply text-2xl md:text-3xl lg:text-4xl font-bold text-foreground mb-2;
  }

  .booking-subtitle {
    @apply text-sm md:text-base text-muted-foreground mb-6 tracking-wide;
  }

  .booking-cta-button {
    @apply w-full md:w-auto max-w-[200px] px-6 py-3 rounded-full text-base font-semibold bg-primary text-primary-foreground transition hover:-translate-y-0.5 hover:shadow-lg;
  }

  .booking-form-container {
    @apply max-w-[800px] mx-auto px-2 md:px-0;
  }

  .booking-form {
    @apply bg-card rounded-[var(--radius)] p-5 md:p-12 border border-border;
  }

  .form-subtitle {
    @apply text-muted-foreground;
  }

  /* Booking form grid and groups */
  .form-grid {
    @apply grid gap-4 md:grid-cols-2;
  }

  .form-group {
    @apply mb-4;
  }

  .form-group label {
    @apply block text-sm font-medium text-foreground mb-2;
  }

  .form-group input,
  .form-group textarea,
  .form-group select {
    @apply w-full px-4 py-3 text-base border border-input rounded-[calc(var(--radius)*0.75)] bg-background text-foreground transition focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring;
  }

  .form-group textarea {
    @apply min-h-[120px] resize-y;
  }

  /* Error states */
  .form-group input.error,
  .form-group textarea.error,
  .form-group select.error {
    @apply border-destructive focus:ring-destructive/20;
  }

  .error-message {
    @apply text-sm text-destructive mt-1;
  }

  .error-summary {
    @apply bg-destructive/10 border border-destructive/30 text-destructive rounded-[var(--radius)] p-4 mb-4;
  }

  .error-summary ul {
    @apply list-disc list-inside m-0;
  }

  /* Service type chips */
  .chip-list {
    @apply flex flex-wrap gap-2;
  }

  .chip {
    @apply px-4 py-2 rounded-full border-2 border-input bg-background text-foreground font-medium text-sm cursor-pointer transition hover:border-primary/50;
  }

  .chip.selected {
    @apply bg-primary text-primary-foreground border-primary;
  }

  /* Submit button */
  .submit-button {
    @apply w-full px-6 py-3 rounded-[var(--radius)] font-semibold text-base bg-primary text-primary-foreground transition hover:brightness-105 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Success message */
  .success-message {
    @apply text-center py-12;
  }

  .success-icon {
    @apply inline-flex items-center justify-center size-16 rounded-full bg-success/10 text-success mb-4;
  }

  .success-note {
    @apply text-sm text-muted-foreground mt-4;
  }

  .hp {
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
  }

  /* Footer (full + minimal) */
  .site-footer {
    @apply bg-[#1a1a1a] text-[#e0e0e0] pt-12 pb-24 px-4 mt-16;
  }

  .footer-content {
    @apply grid gap-8 md:grid-cols-3 mb-8;
  }

  .footer-links {
    @apply flex gap-6 flex-wrap;
  }

  .footer-links a {
    @apply text-[#e0e0e0] no-underline transition hover:text-accent;
  }

  .footer-bottom {
    @apply text-center pt-8 border-t border-white/10 text-[0.9rem] opacity-80;
  }

  .site-footer-minimal {
    @apply bg-background border-t border-border py-8 md:py-12 mt-12;
    padding-bottom: calc(2rem + env(safe-area-inset-bottom));
  }

  .footer-main {
    @apply px-4 md:flex md:justify-between md:items-center md:max-w-[1200px] md:mx-auto md:px-8;
  }

  .footer-brand {
    @apply text-center md:text-left mb-6 md:mb-0;
  }

  .footer-logo {
    @apply size-20 md:size-24 object-cover rounded-full mx-auto md:mx-0 mb-3 border-2 border-border block;
  }

  .footer-title {
    @apply text-lg md:text-xl font-semibold text-foreground mb-1;
  }

  .footer-tagline {
    @apply text-[0.75rem] text-muted-foreground tracking-wider uppercase;
  }

  .footer-nav {
    @apply flex justify-center md:justify-start gap-6 md:gap-8 flex-wrap px-4 mb-6 md:mb-0;
  }

  .footer-link {
    @apply text-muted-foreground no-underline text-sm md:text-base font-medium p-2 transition hover:text-primary;
  }

  .footer-copyright {
    @apply text-[0.75rem] text-foreground;
  }

  /* Share toolbar / manager (condensed) */
  .share-toolbar {
    @apply flex items-center justify-between gap-3 mb-3;
  }

  .share-actions {
    @apply inline-flex gap-2 flex-wrap;
  }

  .utm-toggle {
    @apply inline-flex items-center gap-1.5 text-[0.8rem] text-muted-foreground;
  }

  .share-grid {
    @apply grid gap-2 grid-cols-2 sm:grid-cols-3 md:grid-cols-4;
  }

  .share-btn {
    @apply inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-white no-underline transition;
    background: var(--brand, var(--color-accent));
  }

  .share-btn:hover {
    @apply -translate-y-0.5 brightness-95;
  }

  .share-btn:active {
    @apply translate-y-0 brightness-90;
  }

  .qr-share-card {
    @apply grid grid-cols-[auto_1fr] items-center gap-3;
  }

  .qr-wrap {
    @apply p-2 rounded bg-muted text-foreground;
  }

  .qr-meta {
    @apply min-w-0;
  }

  .qr-label {
    @apply text-[0.9rem] text-foreground;
  }

  .qr-url {
    @apply text-[0.75rem] text-muted-foreground truncate;
  }

  .share-manager {
    @apply p-6 bg-card rounded-[var(--radius)] border border-border;
  }

  .share-heading {
    @apply text-lg font-semibold text-foreground m-0;
  }

  .share-primary-actions {
    @apply flex flex-wrap gap-3;
  }

  /* =================================================================
     8. UI Polish (2025-09) – About + Media Panel (restored, v4-native)
     - Lives in @layer components so utilities/tokens are available
     - Overlap-pruned: we only add/extend where not already defined
     ================================================================= */

  /* CreatorMediaPanel – focus ring for tab controls (more specific than base) */
  .inline-flex > button:focus-visible {
    outline: 3px solid var(--color-ring);
    outline-offset: 2px;
    box-shadow: none;
  }

  /* Touch-target guarantee (WCAG-friendly) for interactive buttons */
  .btn, .platform-btn { min-height: 44px; min-width: 44px; }

  /* Remove nested card spacing collapse */
  [data-slot="card-content"] > .overflow-hidden + .overflow-hidden { margin-top: 1rem; }

  /* ================================================================
     Platform Launcher - Mobile Optimized Minimal Design (react-icons)
     ================================================================ */
  .platform-launcher-inline.icons-only .platform-grid {
    display:flex; gap:.75rem; justify-content:center; flex-wrap:nowrap;
    overflow-x:auto; padding:.5rem 0; -webkit-overflow-scrolling:touch;
    scrollbar-width:none;
  }
  .platform-launcher-inline.icons-only .platform-grid::-webkit-scrollbar { display:none; }

  .platform-launcher-inline.icons-only .platform-card {
    min-width:48px; width:48px; height:48px; padding:0; border-radius:999px;
    display:flex; align-items:center; justify-content:center;
    background: var(--color-card);
    border:2px solid transparent; transition: all .2s ease; flex-shrink:0;
  }
  .platform-launcher-inline.icons-only .platform-card:hover,
  .platform-launcher-inline.icons-only .platform-card:focus-visible {
    border-color: var(--platform-color); transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0,0,0,.15);
  }

  /* Icon helpers (non-overlapping with existing size utilities) */
  .platform-icon-svg { color: var(--platform-color); transition: transform .2s ease; }
  .platform-card:active .platform-icon-svg { transform: scale(.9); }

  /* Colored buttons with safe fallback foreground */
  .platform-launcher__button--colored {
    background: var(--platform-color);
    border-color: var(--platform-color);
    color: white;
    /* color-contrast() is experimental; falls back to white if unsupported */
    --platform-foreground: color-contrast(var(--platform-color) vs hsl(0 0% 0%), hsl(0 0% 100%));
  }
  .platform-launcher__button--colored .platform-launcher__icon {
    color: var(--platform-foreground, white);
  }

  /* Floating FAB refinements (separate class family from existing BEM) */
  .platform-launcher-fab {
    position: fixed;
    bottom: calc(76px + env(safe-area-inset-bottom));
    right: calc(1rem + env(safe-area-inset-right));
    z-index: 900;
  }
  .fab-trigger {
    width:56px; height:56px; border-radius:999px;
    background: var(--color-accent); color:#fff; border:none;
    box-shadow: 0 4px 12px rgba(0,0,0,.25);
    display:flex; align-items:center; justify-content:center;
    cursor:pointer; transition: all .3s ease;
  }
  .fab-menu {
    position:absolute; bottom:0; right:0;
    background: color-mix(in oklab, var(--color-card) 98%, transparent);
    backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
    border-radius: 28px; padding: .75rem; box-shadow: 0 8px 32px rgba(0,0,0,.2);
    min-width:64px;
  }
  .fab-platforms { display:flex; flex-direction:column; gap:.5rem; }
  .fab-platform-btn {
    width:48px; height:48px; border-radius:999px; background: var(--platform-color);
    border:none; color:#fff; display:flex; align-items:center; justify-content:center;
    cursor:pointer; transition: all .2s ease; position:relative;
  }
  .fab-platform-btn:hover { transform: scale(1.1); box-shadow: 0 4px 12px rgba(0,0,0,.2); }
  .fab-platform-btn:active { transform: scale(.95); }
  .fab-platform-icon-svg { filter: drop-shadow(0 1px 2px rgba(0,0,0,.2)); }

  /* Tooltip label for FAB items */
  .fab-platform-btn .fab-platform-tooltip {
    position:absolute; right: calc(100% + 8px); top:50%;
    transform: translateY(-50%);
    background: var(--color-card); color: var(--color-foreground);
    border:1px solid var(--color-border); border-radius:999px;
    padding:.25rem .5rem; font-size:.8rem; white-space:nowrap; pointer-events:none;
    opacity:0; translate: 4px 0; transition: opacity .15s ease, translate .15s ease;
  }
  .fab-platform-btn:focus-visible .fab-platform-tooltip,
  .fab-platform-btn:hover .fab-platform-tooltip { opacity:1; translate: 0 0; }

  .fab-close {
    position:absolute; top:-8px; right:-8px; width:28px; height:28px; border-radius:999px;
    background: var(--color-destructive); color:#fff; border:2px solid var(--color-card);
    display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:1;
  }

  /* Modal icon polish */
  .platform-modal-icon-svg { color:#fff; filter: drop-shadow(0 2px 4px rgba(0,0,0,.3)); }

  /* Dark-mode tweaks */
  .dark .fab-menu { background: color-mix(in oklab, var(--color-card) 95%, transparent); }
  .dark .platform-launcher-inline.icons-only .platform-card { background: var(--color-secondary); }
  .dark .platform-launcher-inline.icons-only .platform-card:hover { background: var(--color-card); }

  /* Responsive tweaks */
  @media (max-width: 480px) {
    .platform-launcher-fab { bottom: calc(70px + env(safe-area-inset-bottom));
      right: calc(0.75rem + env(safe-area-inset-right)); }
    .fab-trigger { width:52px; height:52px; }
    .fab-platform-btn { width:44px; height:44px; }
  }

  /* Reduced motion / high contrast */
  @media (prefers-reduced-motion: reduce) {
    .platform-card, .fab-trigger, .fab-platform-btn, .platform-modal-button { transition: none; }
  }
  @media (prefers-contrast: high) {
    .platform-launcher-inline.icons-only .platform-card { border-width: 3px; }
    .fab-platform-btn { outline: 2px solid #fff; outline-offset: 2px; }
  }

  /* =====================================================
     Share add-ons (dark-mode contrast only; base kept)
     ===================================================== */
  .dark .share-btn { background: var(--color-card); color: var(--color-foreground); border: 1px solid var(--brand, var(--color-accent)); }
  .dark .share-btn svg { color: var(--brand); }

  /* =====================================================
     5.30 ShareManager Component – additional structures
     ===================================================== */
  .share-manager-auto { display:flex; flex-direction:column; gap:1.5rem; }
  .share-manager-grid { display:grid; gap:1.5rem; }
  .share-manager-stack { display:flex; flex-direction:column; gap:1.5rem; }
  .share-action-btn {
    display:inline-flex; align-items:center; gap:.5rem; padding:.625rem 1rem;
    background: var(--color-muted); color: var(--color-foreground);
    border:1px solid var(--color-border); border-radius: var(--radius, .75rem);
    font-size:.875rem; font-weight:500; cursor:pointer; transition: all .2s ease;
  }
  .share-action-btn:hover { background: color-mix(in oklab, var(--color-muted), transparent 20%); transform: translateY(-1px); }
  .share-action-btn:active { transform: translateY(0); }
  .share-action-btn:focus-visible { outline:2px solid var(--color-ring); outline-offset:2px; }

  .share-platforms { display:flex; flex-direction:column; gap:.75rem; }
  .share-platform-buttons { display:flex; flex-wrap:wrap; gap:.75rem; }

  .share-deep-links { display:flex; flex-direction:column; gap:1rem; }
  .deep-links-heading {
    font-size:.875rem; font-weight:600; text-transform:uppercase; letter-spacing:.05em;
    color: var(--color-muted-foreground); margin:0;
  }
  .deep-links-list { display:flex; flex-wrap:wrap; gap:.75rem; }
  .deep-link-btn {
    display:inline-flex; align-items:center; gap:.5rem; padding:.625rem 1rem;
    background: var(--color-muted); color: var(--color-foreground);
    border:2px solid transparent; border-radius: var(--radius, .75rem);
    font-size:.875rem; font-weight:500; cursor:pointer; transition: all .2s ease;
  }
  .deep-link-btn:hover { border-color: var(--platform-color, var(--color-border)); transform: translateY(-1px); }
  .deep-link-btn:active { transform: translateY(0); }
  .deep-link-btn:focus-visible { outline:2px solid var(--color-ring); outline-offset:2px; }

  /* QR section */
  .share-qr-region {
    padding:1rem; background: color-mix(in oklab, var(--color-muted), transparent 70%);
    border-radius: var(--radius, .75rem); animation: fadeIn .3s ease;
  }
  .share-qr-card { margin:0; }

  /* Mobile tweaks for ShareManager */
  @media (max-width: 640px) {
    .share-manager { padding:1rem; }
    .share-primary-actions { width:100%; }
    .share-action-btn, .deep-link-btn {
      flex:1; min-width: calc(50% - .375rem); justify-content:center;
    }
  }
}

/* 4) Utility-ish helpers that need raw CSS ------------------------------- */
/* Sibling stack spacing */
.stack {
  --stack-gap: 0.75rem;
}

.stack>*+* {
  margin-top: var(--stack-gap);
}

/* Safe-area paddings/margins */
.p-safe {
  padding: 1rem;
  padding-top: calc(1rem + var(--safe-area-inset-top));
  padding-right: calc(1rem + var(--safe-area-inset-right));
  padding-bottom: calc(1rem + var(--safe-area-inset-bottom));
  padding-left: calc(1rem + var(--safe-area-inset-left));
}

.pb-safe {
  padding-bottom: calc(1rem + var(--safe-area-inset-bottom));
}

.mb-safe {
  margin-bottom: var(--safe-area-inset-bottom);
}

/* Mobile-only admin compact tweaks (kept minimal; prefer utilities in markup) */
.admin-compact .section-title {
  font-size: 1.25rem;
}

.admin-compact .checkout-section__title {
  font-size: 1.1rem;
}

/* =====================================================
   PHASE 1: Mobile Touch Target Compliance (WCAG 2.2)
   Added: 2025-10-03
   ===================================================== */

/* 1.1: Base touch target sizing - applies to all interactive elements */
@media (max-width: 640px) {
  /* Ensure all buttons meet 44x44px minimum */
  .btn,
  button:not(.unstyled),
  a.btn {
    min-height: 44px;
    min-width: 44px;
    padding: 0.625rem 1rem; /* 10px 16px */
  }

  /* Small buttons - increase from current ~32x28px */
  .btn-sm {
    min-height: 44px;
    min-width: 44px;
    padding: 0.625rem 0.875rem; /* 10px 14px */
    font-size: 0.875rem; /* Maintain visual hierarchy */
  }

  /* Icon-only buttons - explicit sizing */
  .btn-icon {
    min-height: 44px;
    min-width: 44px;
    padding: 0.625rem;
  }

  /* Quantity selector - critical for checkout UX */
  .quantity-selector__btn {
    min-width: 44px;
    min-height: 44px;
    font-size: 1.25rem; /* 20px - larger tap area visual */
    padding: 0.5rem;
    touch-action: manipulation; /* Prevent double-tap zoom */
  }

  /* Shipping options - often too small */
  .shipping-option {
    min-height: 56px; /* Extra height for readability */
    padding: 0.875rem 1rem; /* 14px 16px */
    touch-action: manipulation;
  }

  /* Product card buttons - key conversion point */
  .product-card__actions .btn {
    min-height: 44px;
    width: 100%; /* Full width for easier tapping */
    justify-content: center;
  }

  /* Navigation items - already compliant but explicit */
  .nav-item {
    min-width: 44px;
    min-height: 44px;
  }

  /* Form submit buttons - critical actions */
  .submit-button,
  .booking-cta-button {
    min-height: 48px; /* Slightly larger for primary actions */
    min-width: 48px;
    padding: 0.75rem 1.5rem; /* 12px 24px */
  }

  /* Checkout footer button - thumb zone optimization */
  .checkout-footer .btn {
    min-height: 52px; /* Easier to tap with thumb */
    font-size: 1rem;
    font-weight: 600;
  }

  /* Admin compact mode buttons */
  .admin-compact .btn-sm {
    min-height: 44px;
    min-width: 44px;
  }

  /* Radio buttons and checkboxes - increase hit area */
  input[type="radio"],
  input[type="checkbox"] {
    min-width: 24px;
    min-height: 24px;
    margin-right: 0.5rem;
  }

  /* Radio/checkbox labels - expand clickable area */
  input[type="radio"] + *,
  input[type="checkbox"] + * {
    padding: 0.5rem;
    margin: -0.5rem;
  }

  /* Ensure spacing between touch targets (24px minimum) */
  .product-card__actions {
    gap: 0.75rem; /* 12px - adequate for 44px targets */
  }

  .form-grid button + button,
  .btn-group .btn + .btn {
    margin-left: 0.75rem; /* 12px spacing */
  }

  /* Stack buttons vertically when space is tight */
  .payment-methods {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .payment-methods .btn {
    width: 100%;
  }
}

/* High-contrast mode - ensure touch targets are visible */
@media (prefers-contrast: high) {
  .btn,
  button:not(.unstyled) {
    outline: 2px solid currentColor;
    outline-offset: 2px;
  }
}

/* 1.2: Input font-size compliance - prevent iOS auto-zoom */
@media (max-width: 640px) {
  /* All form inputs must be 16px minimum to prevent iOS Safari zoom */
  .form-input,
  .form-select,
  .form-textarea,
  input:not([type="radio"]):not([type="checkbox"]):not([type="range"]),
  select,
  textarea {
    font-size: 16px !important; /* Override any smaller sizes */
    -webkit-text-size-adjust: 100%; /* Prevent font scaling */
  }

  /* Admin compact inputs - override the 14.4px */
  .admin-compact .form-input-sm,
  .admin-compact .form-select-sm,
  .admin-compact .form-textarea-sm {
    font-size: 16px !important;
    padding: 0.5rem 0.75rem; /* Adjust padding to maintain visual size */
  }

  /* BookingForm inputs */
  .booking-form input,
  .booking-form select,
  .booking-form textarea,
  .form-group input,
  .form-group select,
  .form-group textarea {
    font-size: 16px !important;
  }

  /* Search inputs */
  input[type="search"],
  input[type="email"],
  input[type="tel"],
  input[type="text"],
  input[type="number"],
  input[type="date"],
  input[type="time"],
  input[type="url"],
  input[type="password"] {
    font-size: 16px !important;
  }

  /* Placeholder text should also be 16px */
  input::placeholder,
  textarea::placeholder {
    font-size: 16px;
  }

  /* Labels can be smaller, but not inputs */
  .form-label,
  .form-group label {
    font-size: 0.875rem; /* 14px - acceptable for labels */
  }
}

/* 1.3: Mobile-first breakpoint standardization

   BREAKPOINT SYSTEM (mobile-first):
   - Base: 320px - 480px (Mobile - default styles, no media query)
   - sm:  481px+ (min-width: 481px) - Large mobile
   - md:  769px+ (min-width: 769px) - Tablet
   - lg:  1025px+ (min-width: 1025px) - Desktop
   - xl:  1281px+ (min-width: 1281px) - Large desktop
*/

/* Product Grid - Already mobile-first via Tailwind, enhanced here for smallest screens */
@media (max-width: 480px) {
  .product-grid {
    gap: 1rem; /* Tighter gap on smallest screens */
  }
}

/* Checkout Summary - Convert from desktop-first to mobile-first */
.checkout-summary {
  /* Mobile base: sticky at bottom */
  position: sticky;
  bottom: 0;
  background: var(--color-background);
  border-top: 2px solid var(--color-border);
  margin-inline: -1rem;
  padding: 1rem;
  z-index: 10;
}

@media (min-width: 969px) {
  /* Desktop: sticky at top in sidebar */
  .checkout-summary {
    position: sticky;
    top: 1.5rem;
    border-top: none;
    margin-inline: 0;
  }
}

/* Form grids - Ensure single column on mobile (already handled by Tailwind sm:, md:, lg:) */
/* Hero section mobile optimizations - Already using max-width which is appropriate for mobile-specific tweaks */
/* Services sections - Already using max-width which is appropriate for mobile-specific tweaks */

/* Mobile-specific enhancements for 320px minimum width */
@media (max-width: 375px) {
  /* Extra small screens (iPhone SE, etc) */
  .section-title {
    font-size: 1.5rem; /* Slightly smaller */
  }

  .product-card__title {
    font-size: 1rem;
  }

  .checkout-container {
    padding-inline: 0.5rem; /* Tighter padding */
  }

  .hero-content {
    padding: 1.25rem;
  }
}

/* =====================================================
   PHASE 2: UX Enhancements
   Added: 2025-10-03
   ===================================================== */

/* 2.1: Product Grid - Horizontal Card Layout on Mobile */
@media (max-width: 480px) {
  /* Override default grid for single-column horizontal cards */
  .product-grid {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  /* Horizontal card layout - image left, content right */
  .product-card {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    gap: 1rem;
    padding: 1rem;
    min-height: 140px; /* Ensure consistent height */
  }

  /* Image on left, fixed size */
  .product-card__image {
    flex-shrink: 0;
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius: calc(var(--radius) * 0.75);
  }

  /* Content on right, fills remaining space */
  .product-card__content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    min-width: 0; /* Allow text truncation */
  }

  /* Title - 2 line clamp */
  .product-card__title {
    font-size: 1rem;
    line-height: 1.4;
    margin-bottom: 0.25rem;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Description - 1 line clamp */
  .product-card__content > p {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
    font-size: 0.875rem;
    margin-bottom: 0.5rem;
  }

  /* Price - prominent */
  .product-card__price,
  .product-card__content .product-card__price {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--color-primary);
    margin-bottom: 0.5rem;
  }

  /* Actions - full width buttons stacked */
  .product-card__actions {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-top: auto; /* Push to bottom */
  }

  .product-card__actions .btn {
    width: 100%;
    font-size: 0.875rem;
    padding: 0.625rem 0.75rem;
  }

  /* Hide "View All" button on smallest screens to save space */
  .product-card__actions .btn-outline {
    display: none;
  }

  /* Primary CTA takes full width */
  .product-card__actions .btn-primary {
    width: 100%;
  }
}

/* Tablet: Show both buttons side by side */
@media (min-width: 481px) and (max-width: 768px) {
  .product-card__actions {
    flex-direction: row;
  }

  .product-card__actions .btn-outline {
    display: inline-flex;
  }
}

/* 2.1b: Product Card Loading Skeletons */
.product-card--loading {
  pointer-events: none;
  user-select: none;
}

.product-card--loading .product-card__image {
  background: linear-gradient(
    90deg,
    var(--color-muted) 25%,
    var(--color-border) 50%,
    var(--color-muted) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.product-card--loading .product-card__title,
.product-card--loading .product-card__price {
  background: var(--color-muted);
  color: transparent;
  border-radius: 4px;
  animation: shimmer 1.5s infinite;
}

@keyframes product-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* 2.2: Swipe-to-Delete Cart Items */
@media (max-width: 640px) {
  .cart-item {
    position: relative;
    overflow: hidden;
    touch-action: pan-y; /* Allow vertical scroll, handle horizontal in JS */
  }

  /* Swipeable container */
  .cart-item__swipeable {
    position: relative;
    display: flex;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform;
  }

  .cart-item__swipeable.swiping {
    transition: none; /* Disable transition during swipe */
  }

  /* Delete action revealed on swipe */
  .cart-item__delete-action {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 120px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-destructive);
    color: white;
    font-weight: 600;
    font-size: 0.875rem;
    opacity: 0;
    transform: translateX(100%);
    transition: opacity 0.3s, transform 0.3s;
  }

  .cart-item--swiped-left .cart-item__delete-action {
    opacity: 1;
    transform: translateX(0);
  }

  /* Delete icon */
  .cart-item__delete-icon {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
  }

  .cart-item__delete-icon svg {
    width: 24px;
    height: 24px;
  }

  /* Swipe hint on first item */
  .cart-item:first-child::after {
    content: '← Swipe to delete';
    position: absolute;
    top: 50%;
    right: 1rem;
    transform: translateY(-50%);
    font-size: 0.75rem;
    color: var(--color-muted-foreground);
    pointer-events: none;
    opacity: 0;
    animation: swipe-hint 4s ease-in-out;
  }

  @keyframes swipe-hint {
    0%, 90%, 100% { opacity: 0; }
    10%, 80% { opacity: 0.5; }
  }

  /* Hide hint after first swipe */
  .cart-items--has-swiped .cart-item:first-child::after {
    display: none;
  }
}

/* 2.3: Checkout Page Mobile Optimization */
@media (max-width: 640px) {
  /* Reduce padding on mobile */
  .checkout-container {
    padding-inline: 0.75rem;
  }

  /* Section cards - full bleed with border */
  .checkout-section {
    margin-inline: -0.75rem;
    padding: 1.25rem;
    border-radius: 0;
    border-left: none;
    border-right: none;
    border-top: 1px solid var(--color-border);
  }

  .checkout-section:first-of-type {
    border-top: none;
  }

  /* Section titles - slightly smaller */
  .checkout-section__title {
    font-size: 1.125rem;
    margin-bottom: 1rem;
  }

  /* Form fields - optimize spacing */
  .form-field {
    margin-bottom: 1rem;
  }

  /* Form inputs - larger touch area */
  .checkout-section .form-input,
  .checkout-section .form-select {
    padding: 0.875rem 1rem;
  }

  /* Save address button - full width */
  .checkout-section .btn:not(.shipping-option):not(.quantity-selector__btn) {
    width: 100%;
    justify-content: center;
  }

  /* Shipping options - enhanced card style */
  .shipping-option {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    border: 2px solid var(--color-border);
    border-radius: calc(var(--radius) * 0.75);
    background: var(--color-card);
    transition: all 0.2s;
    cursor: pointer;
  }

  .shipping-option:active {
    transform: scale(0.98);
  }

  .shipping-option--selected {
    border-color: var(--color-primary);
    background: color-mix(in oklab, var(--color-primary) 5%, var(--color-card));
  }

  .shipping-option__name {
    font-weight: 500;
    font-size: 0.9375rem;
  }

  .shipping-option__price {
    font-weight: 600;
    color: var(--color-primary);
  }

  /* Cart items - compact on mobile */
  .cart-item {
    padding: 0.75rem 0;
    gap: 0.75rem;
  }

  .cart-item__image {
    width: 64px;
    height: 64px;
  }

  .cart-item__details {
    font-size: 0.875rem;
  }

  .cart-item__name {
    font-size: 0.9375rem;
    line-height: 1.3;
  }

  /* Quantity selector - optimize spacing */
  .quantity-selector {
    gap: 0.375rem;
  }

  .quantity-selector__btn {
    width: 36px;
    height: 36px;
    /* Note: Touch target 44x44 handled by Phase 1 via min-width/min-height */
  }

  .quantity-selector__value {
    min-width: 32px;
    text-align: center;
    font-size: 0.9375rem;
  }

  /* Summary rows - clear hierarchy */
  .cart-summary__row {
    display: flex;
    justify-content: space-between;
    padding: 0.625rem 0;
    font-size: 0.9375rem;
  }

  .cart-summary__row--total {
    font-size: 1.125rem;
    font-weight: 700;
    padding-top: 0.75rem;
    border-top: 2px solid var(--color-border);
    margin-top: 0.5rem;
  }

  /* Checkout footer - full width CTA */
  .checkout-footer {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 1rem 0.75rem;
    padding-bottom: calc(1rem + env(safe-area-inset-bottom));
    background: var(--color-card);
    border-top: 1px solid var(--color-border);
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
    z-index: 100;
  }

  .checkout-footer .btn {
    width: 100%;
    min-height: 52px;
    font-size: 1rem;
    font-weight: 600;
  }

  /* Add bottom padding to prevent content hiding behind footer */
  body.has-checkout-footer {
    padding-bottom: calc(80px + env(safe-area-inset-bottom));
  }
}

/* Tablet optimization */
@media (min-width: 641px) and (max-width: 1023px) {
  .checkout-grid {
    grid-template-columns: 1fr;
    max-width: 700px;
    margin-inline: auto;
  }

  .checkout-summary {
    position: sticky;
    top: 1rem;
  }
}

/* =====================================================
   PHASE 3: Modern Features
   Added: 2025-10-03
   ===================================================== */

/* 3.1: Pull-to-Refresh */
@media (max-width: 640px) {
  .pull-to-refresh-container {
    position: relative;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: contain;
  }

  /* Refresh indicator */
  .pull-to-refresh-indicator {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 80px;
    transform: translateY(-80px);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
    z-index: 10;
  }

  .pull-to-refresh-indicator--pulling {
    transform: translateY(0);
  }

  /* Spinner */
  .pull-to-refresh-spinner {
    width: 32px;
    height: 32px;
    border: 3px solid var(--color-muted);
    border-top-color: var(--color-primary);
    border-radius: 50%;
    transition: transform 0.3s;
  }

  .pull-to-refresh-spinner--rotating {
    animation: ptr-spin 0.8s linear infinite;
  }

  @keyframes ptr-spin {
    to {
      transform: rotate(360deg);
    }
  }

  /* Text feedback */
  .pull-to-refresh-text {
    margin-top: 0.5rem;
    font-size: 0.875rem;
    color: var(--color-muted-foreground);
    font-weight: 500;
  }

  /* Success feedback */
  .pull-to-refresh-success {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    background: var(--color-primary);
    color: white;
    border-radius: 2rem;
    font-size: 0.875rem;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    animation: ptr-success-slide 0.3s ease-out;
  }

  @keyframes ptr-success-slide {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

/* 3.3: Performance Optimizations */

/* Lazy loading images - prevent layout shift */
img[loading='lazy'] {
  content-visibility: auto;
  contain-intrinsic-size: auto 300px; /* Placeholder height */
}

/* Optimize product images */
.product-card__image {
  content-visibility: auto;
}

/* Reduce repaints - contain layout */
.cart-item,
.product-card,
.shipping-option {
  contain: layout style paint;
}

/* GPU acceleration for animations only when needed */
.nav-indicator,
.pull-to-refresh-spinner,
.cart-item__swipeable {
  will-change: transform;
}

/* Remove will-change after animation completes */
@media (prefers-reduced-motion: no-preference) {
  *:not(:hover):not(:focus):not(.animating) {
    will-change: auto;
  }
}

/* Critical CSS - above the fold */
.hero-section,
.mobile-bottom-nav,
.nav-item {
  contain: layout style paint;
}

/* Reduce paint on scroll */
.container,
.section {
  contain: layout style;
}

/* 5) Animations (keyframes only; use Tailwind animate-* where possible) --- */
@keyframes shimmer {
  0% {
    background-position: 200% 0
  }

  100% {
    background-position: -200% 0
  }
}

@keyframes fadeIn {
  from {
    opacity: 0
  }

  to {
    opacity: 1
  }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translate(-50%, -48%)
  }

  to {
    opacity: 1;
    transform: translate(-50%, -50%)
  }
}

/* 6) Print minimal overrides --------------------------------------------- */
@media print {

  .mobile-bottom-nav,
  .platform-launcher--fab,
  .theme-toggle,
  .btn {
    display: none !important;
  }

  body {
    background: #fff;
    color: #000;
  }
}

/* 7) Desktop type scale bump --------------------------------------------- */
@media (min-width: 64rem) {

  /* lg */
  body {
    font-size: 18px;
    line-height: 1.65;
  }
}
